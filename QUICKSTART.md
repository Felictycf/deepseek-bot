# ğŸš€ BTC ç›¯ç›˜æœºå™¨äºº - å¿«é€Ÿä¸Šæ‰‹æŒ‡å—

## âœ… å·²åˆ›å»ºçš„æ–‡ä»¶

```
deepseek_bot/
â”œâ”€â”€ market_data.py           âœ… å¸‚åœºæ•°æ®è·å–æ¨¡å—ï¼ˆCCXT + æŠ€æœ¯æŒ‡æ ‡ï¼‰
â”œâ”€â”€ prompts.py              âœ… Prompt æ„å»ºæ¨¡å—ï¼ˆä» NOFX æå–ï¼‰
â”œâ”€â”€ deepseek_client.py      âœ… DeepSeek API å®¢æˆ·ç«¯
â”œâ”€â”€ btc_monitor.py          âœ… ä¸»ç¨‹åºï¼ˆæŒç»­ç›‘æ§ï¼‰
â”œâ”€â”€ test_monitor.py         âœ… æµ‹è¯•è„šæœ¬ï¼ˆå•æ¬¡è¿è¡Œï¼‰
â”œâ”€â”€ config.json             âœ… é…ç½®æ–‡ä»¶ï¼ˆå·²å¡«å…¥ä½ çš„ API å¯†é’¥ï¼‰
â”œâ”€â”€ config.json.example     âœ… é…ç½®æ–‡ä»¶æ¨¡æ¿
â”œâ”€â”€ requirements.txt        âœ… Python ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ start.sh                âœ… å¯åŠ¨è„šæœ¬
â””â”€â”€ README.md              âœ… å®Œæ•´æ–‡æ¡£
```

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### 1. ä¸ NOFX ç›¸åŒçš„æ•°æ®å’Œ Prompt

- âœ… **System Prompt**: ä» NOFX çš„ `buildSystemPrompt()` æå–ï¼Œé’ˆå¯¹ç›¯ç›˜ä¼˜åŒ–
- âœ… **User Prompt**: ä» NOFX çš„ `buildUserPrompt()` æå–ï¼ŒåŒ…å«å®Œæ•´å¸‚åœºæ•°æ®
- âœ… **å¸‚åœºæ•°æ®**: ä¸ NOFX çš„ `market.Data` ç»“æ„ä¸€è‡´
  - 3åˆ†é’Ÿ K çº¿æ•°æ®ï¼ˆçŸ­æœŸåŠ¨é‡ï¼‰
  - 4å°æ—¶ K çº¿æ•°æ®ï¼ˆä¸­æœŸè¶‹åŠ¿ï¼‰
  - æŠ€æœ¯æŒ‡æ ‡ï¼šEMA20/50, MACD, RSI(7/14), ATR(3/14)
  - èµ„é‡‘é¢æ•°æ®ï¼šæŒä»“é‡ã€èµ„é‡‘è´¹ç‡ã€æˆäº¤é‡

### 2. DeepSeek AI æ·±åº¦åˆ†æ

- æ€ç»´é“¾åˆ†æï¼ˆChain of Thoughtï¼‰
- ç»“æ„åŒ– JSON è¾“å‡º
- å¸‚åœºçŠ¶æ€åˆ¤æ–­ï¼ˆä¸Šæ¶¨/ä¸‹è·Œ/éœ‡è¡/è½¬æŠ˜ï¼‰
- çŸ­æœŸå’Œä¸­æœŸè¶‹åŠ¿é¢„æµ‹
- å…³é”®ä»·ä½è¯†åˆ«ï¼ˆæ”¯æ’‘/é˜»åŠ›ï¼‰
- é£é™©æç¤º

### 3. è‡ªåŠ¨åŒ–åŠŸèƒ½

- â° æ¯ 5 åˆ†é’Ÿè‡ªåŠ¨åˆ†æï¼ˆå¯é…ç½®ï¼‰
- ğŸ“Š è‡ªåŠ¨ç”Ÿæˆ BTC å›¾è¡¨
- ğŸ“± Telegram Bot è‡ªåŠ¨æ¨é€
- ğŸ’¾ åˆ†æç»“æœè‡ªåŠ¨å­˜æ¡£

## ğŸ“‹ å¿«é€Ÿå¼€å§‹ï¼ˆ3 æ­¥ï¼‰

### æ­¥éª¤ 1: å®‰è£…ä¾èµ–

```bash
# 1. å®‰è£… TA-Libï¼ˆæŠ€æœ¯æŒ‡æ ‡åº“ï¼‰
# macOS
brew install ta-lib

# Ubuntu/Debian
sudo apt-get install libta-lib0-dev

# 2. å®‰è£… Python ä¾èµ–
pip install -r requirements.txt
```

### æ­¥éª¤ 2: æµ‹è¯•è¿è¡Œï¼ˆå•æ¬¡åˆ†æï¼‰

```bash
# è¿è¡Œæµ‹è¯•è„šæœ¬ï¼ŒéªŒè¯æ‰€æœ‰ç»„ä»¶æ˜¯å¦æ­£å¸¸
python test_monitor.py
```

**é¢„æœŸè¾“å‡ºï¼š**
```
ğŸ§ª BTC ç›¯ç›˜æœºå™¨äºº - å•æ¬¡æµ‹è¯•
============================================================

ğŸ“Š æ­£åœ¨è·å– BTC å¸‚åœºæ•°æ®...
âœ“ å¸‚åœºæ•°æ®è·å–æˆåŠŸ
  å½“å‰ä»·æ ¼: $95,234.56
  1å°æ—¶æ¶¨è·Œ: +1.23%
  4å°æ—¶æ¶¨è·Œ: -0.45%

ğŸ”¨ æ­£åœ¨æ„å»º AI åˆ†ææç¤ºè¯...
âœ“ æç¤ºè¯æ„å»ºå®Œæˆ

ğŸ¤– æ­£åœ¨è°ƒç”¨ DeepSeek AI è¿›è¡Œåˆ†æ...
âœ“ AI åˆ†æå®Œæˆ

ğŸ“ æ­£åœ¨è§£æ AI å“åº”...
âœ“ å“åº”è§£ææˆåŠŸ
  å¸‚åœºçŠ¶æ€: ä¸Šæ¶¨è¶‹åŠ¿
  ä¿¡å¿ƒåº¦: 75%

ğŸ“ˆ æ­£åœ¨ç”Ÿæˆ BTC å›¾è¡¨...
âœ“ å›¾è¡¨ç”ŸæˆæˆåŠŸ: btc_chart_20251101_122345.png

ğŸ“¤ æ­£åœ¨å‘é€åˆ° Telegram...
âœ“ Telegram æ¶ˆæ¯å‘é€æˆåŠŸ

âœ… ç¬¬ 1 æ¬¡åˆ†æå®Œæˆ
```

### æ­¥éª¤ 3: å¯åŠ¨æŒç»­ç›‘æ§

```bash
# æ–¹å¼ 1: ä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰
./start.sh

# æ–¹å¼ 2: ç›´æ¥è¿è¡Œ Python
python btc_monitor.py
```

## ğŸ¨ ç¤ºä¾‹è¾“å‡º

### Telegram æ¶ˆæ¯æ ¼å¼

```markdown
ğŸ¤– **BTC å¸‚åœºåˆ†ææŠ¥å‘Š**

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ“Œ **æ€»ç»“**: BTCçŸ­æœŸçœ‹æ¶¨ï¼Œå…³æ³¨96500é˜»åŠ›ä½

ğŸ“ˆ **å¸‚åœºçŠ¶æ€**: ä¸Šæ¶¨è¶‹åŠ¿

â° **çŸ­æœŸ(1h)**: 1å°æ—¶å†…å¯èƒ½ç»§ç»­ä¸Šæ¶¨è‡³96000é™„è¿‘ï¼Œé‡ä»·é…åˆè‰¯å¥½
â³ **ä¸­æœŸ(4h)**: 4å°æ—¶ç»´æŒéœ‡è¡ä¸Šè¡Œï¼Œæ³¨æ„é˜»åŠ›ä½å›è°ƒ

ğŸ¯ **å…³é”®ä»·ä½**:
  â€¢ é˜»åŠ›ä½: $96,500
  â€¢ æ”¯æ’‘ä½: $94,000

âš¡ **å…³é”®ä¿¡å·**:
  â€¢ MACDé‡‘å‰ï¼ŒæŸ±çŠ¶å›¾æ”¾å¤§
  â€¢ RSI(7)çªç ´70ï¼ŒçŸ­æœŸè¶…ä¹°
  â€¢ æˆäº¤é‡æ”¾å¤§è‡³å¹³å‡å€¼çš„120%

âš ï¸ **é£é™©æç¤º**: æ³¨æ„96500é˜»åŠ›ä½å¯èƒ½å›è°ƒï¼ŒRSIè¶…ä¹°éœ€è­¦æƒ•

ğŸ“Š **åˆ†æä¿¡å¿ƒåº¦**: 75% (ä¸­)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ’­ **AI åˆ†æè¿‡ç¨‹**:
\```
å½“å‰ BTC å¤„äºæ˜ç¡®çš„ä¸Šæ¶¨è¶‹åŠ¿ä¸­ï¼š

1. çŸ­æœŸåŠ¨é‡ï¼ˆ3åˆ†é’Ÿï¼‰ï¼š
   - ä»·æ ¼çªç ´ EMA20ï¼ŒæŒç»­ä¸Šè¡Œ
   - MACD é‡‘å‰å½¢æˆï¼ŒæŸ±çŠ¶å›¾æŒç»­æ”¾å¤§
   - RSI(7) è¾¾åˆ° 71.5ï¼Œè¿›å…¥è¶…ä¹°åŒºä½†æœªæç«¯

2. ä¸­æœŸè¶‹åŠ¿ï¼ˆ4å°æ—¶ï¼‰ï¼š
   ...
\```

[é™„å›¾: BTC 1å°æ—¶å›¾è¡¨ï¼ŒåŒ…å« MACD, RSI, Volume]
```

### æ—¥å¿—æ–‡ä»¶æ ¼å¼

`analysis_logs/2025-11-01.jsonl`:

```json
{"success": true, "timestamp": "2025-11-01T12:23:45.123456", "market_data": {...}, "cot_trace": "...", "json_result": {...}, "chart_path": "btc_chart_20251101_122345.png"}
{"success": true, "timestamp": "2025-11-01T12:28:45.123456", "market_data": {...}, "cot_trace": "...", "json_result": {...}, "chart_path": "btc_chart_20251101_122845.png"}
```

## ğŸ”§ é…ç½®è¯´æ˜

`config.json` å·²åŒ…å«ä½ çš„ API å¯†é’¥ï¼š

```json
{
  "deepseek_api_key": "sk-eyooo...",           // âœ… å·²é…ç½®ï¼ˆSiliconFlowï¼‰
  "telegram_bot_token": "8478473615:AAG...",  // âœ… å·²é…ç½®
  "telegram_chat_id": "8106156597",           // âœ… å·²é…ç½®
  "chart_api_key": "Csevz22...",              // âœ… å·²é…ç½®
  "analysis_interval_minutes": 5               // åˆ†æé—´éš”
}
```

**ä¿®æ”¹åˆ†æé—´éš”ï¼š**

å¦‚æœæƒ³æ”¹ä¸ºæ¯ 3 åˆ†é’Ÿåˆ†æä¸€æ¬¡ï¼š
```json
"analysis_interval_minutes": 3
```

## ğŸ“Š æ•°æ®å¯¹æ¯”è¡¨

| æ•°æ®é¡¹ | NOFX (Go) | æœ¬é¡¹ç›® (Python) |
|--------|-----------|-----------------|
| **3åˆ†é’Ÿä»·æ ¼åºåˆ—** | `IntradayData.MidPrices` | `intraday_series['mid_prices']` |
| **EMA20 åºåˆ—** | `IntradayData.EMA20Values` | `intraday_series['ema20_values']` |
| **MACD åºåˆ—** | `IntradayData.MACDValues` | `intraday_series['macd_values']` |
| **RSI(7) åºåˆ—** | `IntradayData.RSI7Values` | `intraday_series['rsi7_values']` |
| **4å°æ—¶ EMA50** | `LongerTermData.EMA50` | `longer_term_context['ema50']` |
| **ATR** | `LongerTermData.ATR14` | `longer_term_context['atr14']` |
| **æŒä»“é‡** | `OIData.Latest` | `open_interest['latest']` |
| **èµ„é‡‘è´¹ç‡** | `FundingRate` | `funding_rate` |

## ğŸ› ï¸ å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•åœæ­¢ç¨‹åºï¼Ÿ

æŒ‰ `Ctrl+C` åœæ­¢è¿è¡Œã€‚

### Q2: å¦‚ä½•æŸ¥çœ‹å†å²åˆ†æï¼Ÿ

```bash
# æŸ¥çœ‹ä»Šå¤©çš„åˆ†ææ—¥å¿—
cat analysis_logs/$(date +%Y-%m-%d).jsonl | jq .

# æŸ¥çœ‹æœ€è¿‘ä¸€æ¬¡åˆ†æ
tail -n 1 analysis_logs/$(date +%Y-%m-%d).jsonl | jq .
```

### Q3: å¦‚ä½•åªåˆ†æä¸€æ¬¡ï¼ˆä¸æŒç»­è¿è¡Œï¼‰ï¼Ÿ

```bash
python test_monitor.py
```

### Q4: DeepSeek API è´¹ç”¨å¤šå°‘ï¼Ÿ

çº¦ $0.14 per 1M tokensï¼Œæ¯æ¬¡åˆ†æçº¦ 2000-3000 tokensï¼Œæˆæœ¬çº¦ $0.0003-0.0005ã€‚

### Q5: å¯ä»¥å…³é—­å›¾è¡¨ç”Ÿæˆå—ï¼Ÿ

å¯ä»¥ï¼Œåœ¨ `config.json` ä¸­ç§»é™¤ `chart_api_key` å³å¯ã€‚

### Q6: å¯ä»¥ç›‘æ§å…¶ä»–å¸ç§å—ï¼Ÿ

å¯ä»¥ï¼Œä¿®æ”¹ `market_data.py` ä¸­çš„ `symbol` å‚æ•°ï¼š
```python
# ä» 'BTC/USDT' æ”¹ä¸º 'ETH/USDT'
symbol = 'ETH/USDT'
```

## ğŸ“ é¡¹ç›®ç»“æ„è¯¦è§£

```
deepseek_bot/
â”‚
â”œâ”€â”€ market_data.py              # å¸‚åœºæ•°æ®æ¨¡å—
â”‚   â”œâ”€â”€ MarketData              # æ•°æ®è·å–ç±»
â”‚   â”‚   â”œâ”€â”€ get_btc_complete_data()      # è·å–å®Œæ•´ BTC æ•°æ®
â”‚   â”‚   â”œâ”€â”€ _fetch_klines()              # è·å– K çº¿
â”‚   â”‚   â”œâ”€â”€ _calculate_ema()             # è®¡ç®— EMA
â”‚   â”‚   â”œâ”€â”€ _calculate_macd()            # è®¡ç®— MACD
â”‚   â”‚   â”œâ”€â”€ _calculate_rsi()             # è®¡ç®— RSI
â”‚   â”‚   â””â”€â”€ _calculate_intraday_series() # è®¡ç®—æ—¥å†…åºåˆ—
â”‚   â””â”€â”€ format_market_data_for_display() # æ ¼å¼åŒ–æ˜¾ç¤º
â”‚
â”œâ”€â”€ prompts.py                  # Prompt æ„å»ºæ¨¡å—
â”‚   â”œâ”€â”€ build_system_prompt()   # æ„å»º System Promptï¼ˆå›ºå®šè§„åˆ™ï¼‰
â”‚   â”œâ”€â”€ build_user_prompt()     # æ„å»º User Promptï¼ˆåŠ¨æ€æ•°æ®ï¼‰
â”‚   â””â”€â”€ format_analysis_result() # æ ¼å¼åŒ–åˆ†æç»“æœ
â”‚
â”œâ”€â”€ deepseek_client.py          # DeepSeek API å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ DeepSeekClient          # API å®¢æˆ·ç«¯ç±»
â”‚   â”‚   â”œâ”€â”€ call_with_messages() # è°ƒç”¨ AI APIï¼ˆå¸¦é‡è¯•ï¼‰
â”‚   â”‚   â””â”€â”€ _call_once()         # å•æ¬¡è°ƒç”¨
â”‚   â””â”€â”€ parse_ai_response()     # è§£æ AI å“åº”
â”‚
â””â”€â”€ btc_monitor.py              # ä¸»ç¨‹åº
    â””â”€â”€ BTCMonitor              # ç›‘æ§å™¨ç±»
        â”œâ”€â”€ run_analysis()       # æ‰§è¡Œå•æ¬¡åˆ†æ
        â”œâ”€â”€ run_loop()           # æŒç»­ç›‘æ§å¾ªç¯
        â”œâ”€â”€ _generate_chart()    # ç”Ÿæˆå›¾è¡¨
        â””â”€â”€ _send_to_telegram()  # å‘é€ Telegram
```

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

1. **å…ˆæµ‹è¯•**: è¿è¡Œ `python test_monitor.py` ç¡®è®¤ä¸€åˆ‡æ­£å¸¸
2. **å¯åŠ¨ç›‘æ§**: è¿è¡Œ `./start.sh` å¼€å§‹æŒç»­ç›‘æ§
3. **æŸ¥çœ‹ Telegram**: ç­‰å¾… 5 åˆ†é’Ÿï¼Œæ£€æŸ¥æ˜¯å¦æ”¶åˆ°æ¨é€
4. **æ£€æŸ¥æ—¥å¿—**: æŸ¥çœ‹ `analysis_logs/` ç›®å½•ä¸‹çš„æ—¥å¿—æ–‡ä»¶
5. **ä¼˜åŒ–é…ç½®**: æ ¹æ®éœ€è¦è°ƒæ•´åˆ†æé—´éš”å’Œå…¶ä»–å‚æ•°

## ğŸ”— ç›¸å…³èµ„æº

- **NOFX é¡¹ç›®**: ä¸»é¡¹ç›® GitHub ä»“åº“
- **CLAUDE.md**: é¡¹ç›®æ¶æ„æ–‡æ¡£
- **DeepSeek API æ–‡æ¡£**: https://platform.deepseek.com
- **CCXT æ–‡æ¡£**: https://docs.ccxt.com

---

**å‡†å¤‡å¥½äº†å—ï¼Ÿè¿è¡Œæµ‹è¯•å¼€å§‹å§ï¼** ğŸš€

```bash
python test_monitor.py
```
